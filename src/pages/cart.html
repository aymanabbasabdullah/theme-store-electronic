<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <title>سلة التسوق | متجر الأناقة</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Vite / Tailwind -->
    <script type="module" src="/src/main.ts"></script>
  </head>
  <body
    class="font-sans bg-brand-50 text-slate-900 text-right min-h-screen flex flex-col"
  >
    <!-- Toast (نفس IDs اللي يستخدمها cart.js) -->
    <div
      id="toast"
      class="fixed top-4 left-1/2 -translate-x-1/2 z-50 hidden items-center gap-2 rounded-2xl bg-slate-900 text-white px-4 py-2.5 text-xs shadow-lg animate-fadeIn"
    >
      <span
        class="inline-flex items-center justify-center w-6 h-6 rounded-full bg-emerald-500 text-[11px]"
      >
        ✔
      </span>
      <span id="toast-message">تم تحديث السلة</span>
    </div>

    <div class="min-h-screen flex flex-col">
      <!-- HEADER -->
      <header class="bg-white/90 border-b border-slate-200">
        <div
          class="container mx-auto px-4 py-4 flex items-center justify-between"
        >
          <a href="/index.html" class="flex items-center gap-2">
            <div
              class="w-9 h-9 rounded-2xl bg-brand-500 flex items-center justify-center text-white text-sm font-bold shadow-sm"
            >
              EA
            </div>
            <div class="leading-tight">
              <p class="text-sm font-semibold">متجر الأناقة</p>
              <p class="text-[11px] text-slate-500">سلة التسوق</p>
            </div>
          </a>

          <nav class="flex items-center gap-4 text-xs">
            <a
              href="/src/pages/category.html"
              class="inline-flex items-center gap-1 text-slate-600 hover:text-brand-600"
            >
              <span>متابعة التسوق</span>
              <span class="text-slate-400">↩</span>
            </a>
            <a
              href="/src/pages/account.html"
              class="inline-flex items-center gap-1 text-slate-600 hover:text-brand-700"
            >
              <span
                class="w-7 h-7 rounded-full bg-slate-100 flex items-center justify-center"
              >
                <svg
                  class="w-4 h-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="1.6"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M15.75 6A3.75 3.75 0 1 1 8.25 6a3.75 3.75 0 0 1 7.5 0Zm-9.204 9.443A6.75 6.75 0 0 1 18 18.75a.75.75 0 0 1-.75.75h-10.5A.75.75 0 0 1 6 18.75c0-1.54.526-2.959 1.546-4.057Z"
                  />
                </svg>
              </span>
              <span>الحساب</span>
            </a>
          </nav>
        </div>
      </header>

      <main class="flex-1">
        <div class="container mx-auto px-4 py-6 lg:py-10">
          <!-- Bread + عنوان -->
          <div class="mb-6 lg:mb-8">
            <nav class="text-[11px] text-slate-500 mb-2">
              <ol class="flex flex-wrap gap-1 items-center">
                <li>
                  <a href="/index.html" class="hover:text-brand-600"
                    >الرئيسية</a
                  >
                </li>
                <li>/</li>
                <li><span class="text-slate-700">سلة التسوق</span></li>
              </ol>
            </nav>

            <div
              class="flex flex-col md:flex-row md:items-end md:justify-between gap-3"
            >
              <div>
                <h1 class="text-2xl md:text-3xl font-semibold mb-1">
                  سلة التسوق
                </h1>
                <p class="text-xs md:text-sm text-slate-600 max-w-xl">
                  تحقّق من العناصر التي اخترتها، يمكنك تعديل الكمية أو إزالة
                  المنتجات قبل إتمام عملية الشراء.
                </p>
              </div>

              <!-- Step / حالة التقدم -->
              <div
                class="inline-flex items-center gap-2 rounded-full bg-white border border-slate-200 px-3 py-1 text-[11px] shadow-sm"
              >
                <span
                  class="w-5 h-5 rounded-full bg-brand-500 text-white flex items-center justify-center text-[10px]"
                >
                  1
                </span>
                <span>مراجعة السلة</span>
                <span class="w-1 h-[1px] bg-slate-200 mx-1"></span>
                <span class="text-slate-400">معلومات التوصيل</span>
                <span class="w-1 h-[1px] bg-slate-200 mx-1"></span>
                <span class="text-slate-400">الدفع</span>
              </div>
            </div>
          </div>

          <!-- الشبكة الرئيسية -->
          <div class="grid lg:grid-cols-3 gap-6 items-start">
            <!-- عناصر السلة -->
            <section
              class="lg:col-span-2 bg-white rounded-3xl border border-slate-100 shadow-[var(--shadow-soft)] p-4 sm:p-5"
            >
              <!-- حالة السلة الفارغة -->
              <div
                id="cart-empty"
                class="text-center text-xs text-slate-500 py-10 hidden"
              >
                <div
                  class="mx-auto mb-3 w-12 h-12 rounded-2xl bg-slate-50 flex items-center justify-center"
                >
                  <svg
                    class="w-6 h-6 text-slate-400"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="1.6"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M3 3h2l.75 3M7 13h10l2-7H5.75M7 13 5.75 6M7 13l-1.2 4.8A1 1 0 0 0 6.78 19H18M10 21a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm7 1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"
                    />
                  </svg>
                </div>
                <p class="mb-2">السلة فارغة حالياً.</p>
                <a
                  href="/src/pages/category.html"
                  class="inline-flex items-center gap-1 text-brand-600 hover:text-brand-700 text-[11px]"
                >
                  <span>ابدأ التسوق الآن</span>
                  <span>→</span>
                </a>
              </div>

              <!-- هنا cart.js يرسم الكروت -->
              <div id="cart-items" class="space-y-4"></div>
            </section>

            <!-- ملخص الطلب -->
            <aside
              class="bg-white rounded-3xl border border-slate-100 shadow-[var(--shadow-soft)] p-4 sm:p-5 text-xs space-y-4 lg:sticky lg:top-24"
            >
              <h2 class="text-sm font-semibold mb-1 text-slate-900">
                ملخص الطلب
              </h2>

              <!-- progress الشحن -->
              <div
                class="rounded-2xl bg-surface-50 border border-surface-200 p-3 space-y-2"
              >
                <div class="flex items-center justify-between text-[11px] mb-1">
                  <span class="text-slate-600">قيمة المنتجات</span>
                  <span id="cart-subtotal" class="font-semibold text-slate-900"
                    >0 ريال</span
                  >
                </div>
                <p
                  id="free-shipping-message"
                  class="text-[11px] text-slate-500"
                >
                  تبقى لك 300 ريال للحصول على شحن مجاني.
                </p>
                <div
                  class="w-full h-2 rounded-full bg-slate-100 overflow-hidden"
                >
                  <div
                    id="free-shipping-progress"
                    class="h-full bg-gradient-to-l from-brand-600 to-brand-400 w-0 transition-all duration-300"
                  ></div>
                </div>
              </div>

              <!-- الشحن -->
              <div
                class="flex items-center justify-between text-[11px] text-slate-600 border-b border-slate-100 pb-2"
              >
                <span>رسوم الشحن التقديرية</span>
                <span
                  id="estimated-shipping"
                  class="font-semibold text-slate-900"
                  >0 ريال</span
                >
              </div>

              <!-- الإجمالي -->
              <div class="pt-2 space-y-3">
                <div class="flex items-center justify-between">
                  <span class="text-[11px] font-semibold text-slate-800"
                    >الإجمالي المستحق</span
                  >
                  <span id="cart-total" class="font-bold text-lg text-brand-600"
                    >0 ريال</span
                  >
                </div>
                <p class="text-[11px] text-slate-500 leading-relaxed">
                  الأسعار تشمل ضريبة القيمة المضافة إن وجدت. سيتم احتساب الشحن
                  والخصومات بدقة في صفحة إتمام الشراء.
                </p>

                <a
                  href="/src/pages/checkout.html"
                  class="block text-center rounded-full bg-gradient-to-l from-brand-600 to-brand-500 text-white py-2.5 text-xs font-semibold hover:from-brand-700 hover:to-brand-600 shadow-sm transition"
                >
                  إتمام الشراء الآن
                </a>

                <button
                  type="button"
                  onclick="window.Cart && window.Cart.clearCart()"
                  class="w-full text-center rounded-full border border-slate-200 py-2 text-[11px] text-slate-600 hover:bg-slate-50"
                >
                  تفريغ السلة بالكامل
                </button>
              </div>
            </aside>
          </div>
        </div>
      </main>

      <!-- FOOTER مبسّط -->
      <footer class="border-t border-slate-200 bg-white mt-10">
        <div class="container mx-auto px-4 py-6">
          <div
            class="flex flex-col md:flex-row items-center justify-between gap-3 text-[11px] text-slate-500"
          >
            <p>© <span id="year"></span> متجر الأناقة. جميع الحقوق محفوظة.</p>
            <p>تم تطوير الموقع من قبل م/ايمن عجلان.</p>
          </div>
        </div>
      </footer>
    </div>

    <!-- JS -->
    <script src="/src/assets/js/main.js"></script>
    <script src="/src/assets/js/cart.js"></script>
    <script>
      document.getElementById("year").textContent = new Date()
        .getFullYear()
        .toString();
    </script>
  </body>
</html>
