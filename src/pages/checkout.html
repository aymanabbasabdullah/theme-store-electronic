<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <title>إتمام الشراء | متجر الأناقة</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google Fonts (Arabic friendly) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind / main bundle -->
    <script type="module" src="/src/main.ts"></script>
  </head>

  <body class="bg-brand-50 text-slate-900 font-sans">
    <!-- Page wrapper -->
    <div class="min-h-screen flex flex-col">
      <!-- HEADER - Mega Menu -->
      <header
        class="sticky top-0 z-50 border-b border-slate-200 bg-white/90 backdrop-blur"
      >
        <div class="container mx-auto px-4 py-2 sm:py-3">
          <!-- Top bar (اختياري) -->
          <div
            class="hidden sm:flex items-center justify-between py-2 text-xs text-slate-500"
          >
            <span> دفع آمن وشحن سريع داخل اليمن </span>
            <a
              href="/src/pages/contact.html"
              class="hover:text-brand-700 transition"
            >
              تحتاج مساعدة؟
            </a>
          </div>

          <!-- Main row -->
          <div class="flex items-center justify-between py-3 gap-4">
            <!-- Logo -->
            <a
              href="/index.html"
              class="flex items-center gap-2 text-xl sm:text-2xl font-bold tracking-wide text-slate-900"
            >
              <span
                class="flex items-center justify-center w-9 h-9 rounded-2xl bg-brand-500 text-white text-lg shadow-md"
                >⚡</span
              >
              <span>متجر التقنية</span>
            </a>

            <!-- Right side: خطوات / سلة صغيرة -->
            <div class="flex items-center gap-3 text-sm">
              <a
                href="/src/pages/cart.html"
                class="hidden sm:inline-flex items-center gap-1 text-slate-600 hover:text-brand-600"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-4 h-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                    d="M10.25 6.75L4.75 12l5.5 5.25M19.25 12H5"
                  />
                </svg>
                العودة إلى السلة
              </a>

              <div
                class="inline-flex items-center gap-1 rounded-full bg-emerald-50 text-emerald-700 px-2.5 py-1 text-[11px]"
              >
                <span
                  class="w-4 h-4 rounded-full bg-emerald-500 text-white flex items-center justify-center text-[9px]"
                  >✓</span
                >
                <span>دفع آمن</span>
              </div>
            </div>
          </div>
        </div>
      </header>

      <!-- Toast / notification container -->
      <div
        id="toast-container"
        class="fixed top-40 left-4 z-40 flex flex-col gap-2 max-w-xs"
      ></div>

      <!-- Main content -->
      <main class="flex-1">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-10">
          <!-- Breadcrumb -->
          <nav
            class="text-xs sm:text-sm text-slate-500 mb-4 sm:mb-5"
            aria-label="مسار الصفحة"
          >
            <ol class="flex flex-wrap items-center gap-1">
              <li>
                <a href="index.html" class="hover:text-slate-900">الرئيسية</a>
              </li>
              <li class="text-slate-400">/</li>
              <li>
                <a href="cart.html" class="hover:text-slate-900">سلة التسوق</a>
              </li>
              <li class="text-slate-400">/</li>
              <li class="text-brand-700 font-medium">إتمام الشراء</li>
            </ol>
          </nav>

          <!-- Page header: title + steps -->
          <div
            class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8"
          >
            <div class="space-y-2">
              <div
                class="inline-flex items-center gap-2 rounded-full bg-brand-100/70 text-[11px] text-brand-800 px-3 py-1"
              >
                <span
                  class="inline-flex h-5 w-5 items-center justify-center rounded-full bg-gradient-to-l from-brand-600 to-brand-500 text-white text-[10px] font-bold"
                  >✓</span
                >
                <span>عملية دفع آمنة وسهلة داخل اليمن</span>
              </div>

              <div>
                <h1 class="text-2xl sm:text-3xl font-semibold mb-1">
                  إتمام الشراء
                </h1>
                <p class="text-sm sm:text-base text-slate-500">
                  أدخل بياناتك بدقة لإتمام الطلب وشحنه إلى عنوانك بأسرع وقت.
                </p>
              </div>
            </div>

            <!-- Steps indicator -->
            <div
              class="inline-flex items-center gap-2 rounded-2xl bg-white border border-brand-100 px-4 py-2 text-xs sm:text-sm shadow-soft"
            >
              <!-- Step 1 -->
              <div class="flex items-center gap-1.5">
                <span
                  class="w-6 h-6 rounded-full bg-slate-100 text-slate-500 flex items-center justify-center text-[11px] font-bold"
                >
                  1
                </span>
                <span class="hidden sm:inline text-slate-500">سلة التسوق</span>
              </div>

              <span class="w-6 h-[1px] bg-slate-200"></span>

              <!-- Step 2 (current) -->
              <div class="flex items-center gap-1.5">
                <span
                  class="w-6 h-6 rounded-full bg-gradient-to-l from-brand-600 to-brand-500 text-white flex items-center justify-center text-[11px] font-bold shadow-sm"
                >
                  2
                </span>
                <span class="hidden sm:inline font-semibold text-brand-800">
                  إتمام الشراء
                </span>
              </div>

              <span class="w-6 h-[1px] bg-slate-200"></span>

              <!-- Step 3 -->
              <div class="flex items-center gap-1.5">
                <span
                  class="w-6 h-6 rounded-full bg-slate-100 text-slate-400 flex items-center justify-center text-[11px] font-bold"
                >
                  3
                </span>
                <span class="hidden sm:inline text-slate-400">
                  تأكيد الطلب
                </span>
              </div>
            </div>
          </div>

          <!-- Main grid: form + summary -->
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8">
            <!-- Checkout form -->
            <section class="lg:col-span-2 space-y-5 sm:space-y-6">
              <form
                id="checkout-form"
                class="space-y-5 sm:space-y-6"
                novalidate
                onsubmit="handleCheckoutSubmit(event)"
              >
                <!-- Block 1: Customer info -->
                <div
                  class="bg-white rounded-2xl shadow-soft p-5 sm:p-6 border border-brand-50/70"
                >
                  <div class="flex items-start justify-between gap-3 mb-4">
                    <div>
                      <div class="flex items-center gap-2 mb-1.5">
                        <span
                          class="w-6 h-6 rounded-full bg-gradient-to-l from-brand-600 to-brand-500 text-white flex items-center justify-center text-[11px] font-bold"
                          >1</span
                        >
                        <h2 class="text-lg sm:text-xl font-semibold">
                          معلومات العميل
                        </h2>
                      </div>
                      <p class="text-xs sm:text-sm text-slate-500">
                        سنستخدم هذه البيانات للتواصل معك حول الطلب والتوصيل.
                      </p>
                    </div>
                    <span
                      class="hidden sm:inline-flex items-center rounded-full bg-brand-50 text-[11px] text-brand-700 px-2.5 py-1"
                      >مطلوب *</span
                    >
                  </div>

                  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <!-- Full name -->
                    <div class="sm:col-span-2">
                      <label
                        for="full-name"
                        class="block text-sm font-medium mb-1.5"
                      >
                        الاسم الكامل<span class="text-red-500 mr-1">*</span>
                      </label>
                      <input
                        type="text"
                        id="full-name"
                        name="fullName"
                        required
                        class="w-full rounded-2xl border border-slate-200 bg-slate-50 py-2.5 px-4 text-sm outline-none focus:bg-white focus:ring-2 focus:ring-brand-600/85 focus:border-brand-600/85"
                        placeholder="اكتب اسمك الثلاثي كما سيظهر على الفاتورة"
                      />
                    </div>

                    <!-- Phone -->
                    <div>
                      <label
                        for="phone"
                        class="block text-sm font-medium mb-1.5"
                      >
                        رقم الجوال اليمني<span class="text-red-500 mr-1"
                          >*</span
                        >
                      </label>
                      <input
                        type="tel"
                        id="phone"
                        name="phone"
                        required
                        pattern="^0?7[0-9]{8}$"
                        class="w-full rounded-2xl border text-right border-slate-200 bg-slate-50 py-2.5 px-4 text-sm outline-none focus:bg-white focus:ring-2 focus:ring-brand-600/85 focus:border-brand-600/85 placeholder:text-right"
                        placeholder="مثال: 770807260"
                      />
                      <p class="text-[0.7rem] text-slate-400 mt-1">
                        أدخل رقم يمني مكوّن من 9 أرقام يبدأ بـ 07 (مثل 71 / 73 /
                        77 / 78 / 70).
                      </p>
                    </div>

                    <!-- Email -->
                    <div>
                      <label
                        for="email"
                        class="block text-sm font-medium mb-1.5"
                      >
                        البريد الإلكتروني (اختياري)
                      </label>
                      <input
                        type="email"
                        id="email"
                        name="email"
                        class="w-full rounded-2xl border border-slate-200 bg-slate-50 py-2.5 px-4 text-sm outline-none focus:bg-white focus:ring-2 focus:ring-brand-600/85 focus:border-brand-600/85"
                        placeholder="example@email.com"
                      />
                    </div>
                  </div>
                </div>

                <!-- Block 2: Shipping address -->
                <div
                  class="bg-white rounded-2xl shadow-soft p-5 sm:p-6 border border-slate-100"
                >
                  <div class="flex items-start justify-between gap-3 mb-4">
                    <div>
                      <div class="flex items-center gap-2 mb-1.5">
                        <span
                          class="w-6 h-6 rounded-full bg-gradient-to-l from-brand-600 to-brand-500 text-white flex items-center justify-center text-[11px] font-bold"
                          >2</span
                        >
                        <h2 class="text-lg sm:text-xl font-semibold">
                          عنوان الشحن داخل اليمن
                        </h2>
                      </div>
                      <p class="text-xs sm:text-sm text-slate-500">
                        سيتم شحن طلبك إلى هذا العنوان عبر شركات التوصيل المحلية.
                      </p>
                    </div>
                  </div>

                  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <!-- Country -->
                    <div>
                      <label
                        for="country"
                        class="block text-sm font-medium mb-1.5"
                      >
                        الدولة<span class="text-red-500 mr-1">*</span>
                      </label>
                      <select
                        id="country"
                        name="country"
                        required
                        class="w-full rounded-2xl border border-slate-200 bg-slate-50 py-2.5 px-4 text-sm outline-none focus:bg-white focus:ring-2 focus:ring-brand-600/85 focus:border-brand-600/85"
                      >
                        <option value="">اختر الدولة</option>
                        <option value="ye" selected>اليمن</option>
                      </select>
                    </div>

                    <!-- City -->
                    <div>
                      <label
                        for="city"
                        class="block text-sm font-medium mb-1.5"
                      >
                        المدينة / المحافظة<span class="text-red-500 mr-1"
                          >*</span
                        >
                      </label>
                      <input
                        type="text"
                        id="city"
                        name="city"
                        required
                        class="w-full rounded-2xl border border-slate-200 bg-slate-50 py-2.5 px-4 text-sm outline-none focus:bg-white focus:ring-2 focus:ring-brand-600/85 focus:border-brand-600/85"
                        placeholder="مثال: صنعاء، تعز، عدن..."
                      />
                    </div>

                    <!-- District / Area -->
                    <div>
                      <label
                        for="district"
                        class="block text-sm font-medium mb-1.5"
                      >
                        الحي / المنطقة
                      </label>
                      <input
                        type="text"
                        id="district"
                        name="district"
                        class="w-full rounded-2xl border border-slate-200 bg-slate-50 py-2.5 px-4 text-sm outline-none focus:bg-white focus:ring-2 focus:ring-brand-600/85 focus:border-brand-600/85"
                        placeholder="مثال: حدة، بيت بوس، التحرير..."
                      />
                    </div>

                    <!-- Street -->
                    <div>
                      <label
                        for="street"
                        class="block text-sm font-medium mb-1.5"
                      >
                        اسم الشارع<span class="text-red-500 mr-1">*</span>
                      </label>
                      <input
                        type="text"
                        id="street"
                        name="street"
                        required
                        class="w-full rounded-2xl border border-slate-200 bg-slate-50 py-2.5 px-4 text-sm outline-none focus:bg-white focus:ring-2 focus:ring-brand-600/85 focus:border-brand-600/85"
                        placeholder="اسم الشارع أو أقرب معلم"
                      />
                    </div>

                    <!-- Save address -->
                    <div class="sm:col-span-2 flex items-center gap-2 mt-1">
                      <input
                        id="save-address"
                        type="checkbox"
                        name="saveAddress"
                        class="h-4 w-4 rounded border-slate-300 text-brand-700 focus:ring-brand-700"
                      />
                      <label
                        for="save-address"
                        class="text-xs sm:text-sm text-slate-600"
                      >
                        حفظ هذا العنوان للاستخدام لاحقاً
                      </label>
                    </div>
                  </div>
                </div>

                <!-- Block 3: Shipping methods -->
                <div
                  class="bg-white rounded-2xl shadow-soft p-5 sm:p-6 border border-slate-100"
                >
                  <div class="flex items-start justify-between gap-3 mb-4">
                    <div>
                      <div class="flex items-center gap-2 mb-1.5">
                        <span
                          class="w-6 h-6 rounded-full bg-gradient-to-l from-brand-600 to-brand-500 text-white flex items-center justify-center text-[11px] font-bold"
                          >3</span
                        >
                        <h2 class="text-lg sm:text-xl font-semibold">
                          خيارات الشحن داخل اليمن
                        </h2>
                      </div>
                      <p class="text-xs sm:text-sm text-slate-500">
                        اختر الطريقة الأنسب لموقعك، وسيتم احتساب تكلفتها في
                        الملخص.
                      </p>
                    </div>
                    <span
                      class="hidden sm:inline-flex items-center rounded-full bg-emerald-50 text-[11px] text-emerald-700 px-2.5 py-1"
                      >توصيل خلال ٢–٥ أيام</span
                    >
                  </div>

                  <div id="shipping-methods" class="space-y-3">
                    <!-- Sana'a -->
                    <label
                      class="flex items-start gap-3 rounded-2xl border border-slate-200 p-3.5 cursor-pointer hover:border-brand-600/70 hover:bg-brand-50/40 transition"
                    >
                      <input
                        type="radio"
                        name="shippingMethod"
                        value="sanaa"
                        class="mt-1 h-4 w-4 text-brand-600 focus:ring-brand-600"
                        checked
                      />
                      <div class="flex-1">
                        <div class="flex items-center justify-between gap-2">
                          <span class="text-sm font-medium">
                            توصيل داخل صنعاء
                          </span>
                          <span class="text-sm font-semibold">
                            1,000 ريال يمني
                          </span>
                        </div>
                        <p class="text-xs text-slate-500 mt-1">
                          التوصيل خلال ٢٤ - ٤٨ ساعة داخل أمانة العاصمة.
                        </p>
                      </div>
                    </label>

                    <!-- Other governorates -->
                    <label
                      class="flex items-start gap-3 rounded-2xl border border-slate-200 p-3.5 cursor-pointer hover:border-brand-600/70 hover:bg-brand-50/40 transition"
                    >
                      <input
                        type="radio"
                        name="shippingMethod"
                        value="governorates"
                        class="mt-1 h-4 w-4 text-brand-600 focus:ring-brand-600"
                      />
                      <div class="flex-1">
                        <div class="flex items-center justify-between gap-2">
                          <span class="text-sm font-medium">
                            توصيل إلى باقي المحافظات
                          </span>
                          <span class="text-sm font-semibold">
                            2,500 ريال يمني
                          </span>
                        </div>
                        <p class="text-xs text-slate-500 mt-1">
                          التوصيل عبر شركات النقل خلال ٢ - ٥ أيام عمل حسب
                          المدينة.
                        </p>
                      </div>
                    </label>

                    <!-- Pickup -->
                    <label
                      class="flex items-start gap-3 rounded-2xl border border-dashed border-slate-200 p-3.5 cursor-pointer hover:border-brand-600/70 hover:bg-emerald-50/40 transition"
                    >
                      <input
                        type="radio"
                        name="shippingMethod"
                        value="pickup"
                        class="mt-1 h-4 w-4 text-brand-600 focus:ring-brand-600"
                      />
                      <div class="flex-1">
                        <div class="flex items-center justify-between gap-2">
                          <span class="text-sm font-medium">
                            استلام من المعرض
                          </span>
                          <span class="text-sm font-semibold text-emerald-600">
                            مجاني
                          </span>
                        </div>
                        <p class="text-xs text-slate-500 mt-1">
                          استلم طلبك من الفرع خلال ٢٤ ساعة (سيتم التواصل معك
                          لتحديد الموقع).
                        </p>
                      </div>
                    </label>
                  </div>
                </div>

                <!-- Block 4: Payment + notes + terms -->
                <div
                  class="bg-white rounded-2xl shadow-soft p-5 sm:p-6 space-y-5 border border-slate-100"
                >
                  <!-- Payment methods -->
                  <div>
                    <div class="flex items-start justify-between gap-3 mb-4">
                      <div>
                        <div class="flex items-center gap-2 mb-1.5">
                          <span
                            class="w-6 h-6 rounded-full bg-gradient-to-l from-brand-600 to-brand-500 text-white flex items-center justify-center text-[11px] font-bold"
                            >4</span
                          >
                          <h2 class="text-lg sm:text-xl font-semibold">
                            طرق الدفع
                          </h2>
                        </div>
                        <p class="text-xs sm:text-sm text-slate-500">
                          اختر طريقة الدفع المفضّلة لديك. سنعرض لك تفاصيل
                          التحويل للمحفظة المختارة.
                        </p>
                      </div>
                      <span
                        class="hidden sm:inline-flex items-center rounded-full bg-brand-50 text-[11px] text-brand-700 px-2.5 py-1"
                        >دفع إلكتروني أو عند الاستلام</span
                      >
                    </div>

                    <div
                      id="payment-methods"
                      class="grid grid-cols-1 sm:grid-cols-2 gap-3"
                    >
                      <!-- كريمي -->
                      <label
                        class="flex items-center gap-3 rounded-2xl border border-slate-200 p-3 cursor-pointer hover:border-brand-600/70 hover:bg-brand-50/40 transition"
                      >
                        <input
                          type="radio"
                          name="paymentMethod"
                          value="kuraimi"
                          class="h-4 w-4 text-brand-600 focus:ring-brand-600"
                          checked
                        />
                        <img
                          src="/src/assets/images/buys/kurime.png"
                          class="w-10 h-10 rounded-full"
                          alt=""
                        />
                        <div>
                          <p class="text-sm font-medium">كريمي جوال</p>
                          <p class="text-xs text-slate-500">
                            تحويل عبر محفظة كريمي جوال إلى رقم المحفظة الخاص
                            بالمتجر.
                          </p>
                        </div>
                      </label>

                      <!-- جيب -->
                      <label
                        class="flex items-center gap-3 rounded-2xl border border-slate-200 p-3 cursor-pointer hover:border-brand-600/70 hover:bg-brand-50/40 transition"
                      >
                        <input
                          type="radio"
                          name="paymentMethod"
                          value="jeb"
                          class="h-4 w-4 text-brand-600 focus:ring-brand-600"
                        />
                        <img
                          src="/src/assets/images/buys/jaiep.png"
                          class="w-10 h-10 rounded-full"
                          alt=""
                        />
                        <div>
                          <p class="text-sm font-medium">جيب</p>
                          <p class="text-xs text-slate-500">
                            الدفع باستخدام محفظة جيب الإلكترونية.
                          </p>
                        </div>
                      </label>

                      <!-- ون كاش -->
                      <label
                        class="flex items-center gap-3 rounded-2xl border border-slate-200 p-3 cursor-pointer hover:border-brand-600/70 hover:bg-brand-50/40 transition"
                      >
                        <input
                          type="radio"
                          name="paymentMethod"
                          value="onecash"
                          class="h-4 w-4 text-brand-600 focus:ring-brand-600"
                        />
                        <img
                          src="/src/assets/images/buys/oneCach.jpg"
                          class="w-10 h-10 rounded-full"
                          alt=""
                        />
                        <div>
                          <p class="text-sm font-medium">ون كاش</p>
                          <p class="text-xs text-slate-500">
                            تحويل المبلغ عبر ون كاش إلى بيانات المتجر.
                          </p>
                        </div>
                      </label>

                      <!-- فلوسك -->
                      <label
                        class="flex items-center gap-3 rounded-2xl border border-slate-200 p-3 cursor-pointer hover:border-brand-600/70 hover:bg-brand-50/40 transition"
                      >
                        <input
                          type="radio"
                          name="paymentMethod"
                          value="falousak"
                          class="h-4 w-4 text-brand-600 focus:ring-brand-600"
                        />
                        <img
                          src="/src/assets/images/buys/floasak.webp"
                          class="w-10 h-10 rounded-full"
                          alt=""
                        />
                        <div>
                          <p class="text-sm font-medium">فلوسك</p>
                          <p class="text-xs text-slate-500">
                            الدفع عبر محفظة فلوسك الإلكترونية.
                          </p>
                        </div>
                      </label>

                      <!-- جوالي -->
                      <label
                        class="flex items-center gap-3 rounded-2xl border border-slate-200 p-3 cursor-pointer hover:border-brand-600/70 hover:bg-brand-50/40 transition"
                      >
                        <input
                          type="radio"
                          name="paymentMethod"
                          value="jawali"
                          class="h-4 w-4 text-brand-600 focus:ring-brand-600"
                        />
                        <img
                          src="/src/assets/images/buys/jawali.png"
                          class="w-10 h-10 rounded-full"
                          alt=""
                        />
                        <div>
                          <p class="text-sm font-medium">جوالي</p>
                          <p class="text-xs text-slate-500">
                            تحويل من محفظة جوالي إلى رقم المتجر.
                          </p>
                        </div>
                      </label>

                      <!-- COD -->
                      <label
                        class="flex items-center gap-3 rounded-2xl border border-slate-200 p-3 cursor-pointer hover:border-brand-600/70 hover:bg-brand-50/40 transition"
                      >
                        <input
                          type="radio"
                          name="paymentMethod"
                          value="cod"
                          class="h-4 w-4 text-brand-600 focus:ring-brand-600"
                        />
                        <div>
                          <p class="text-sm font-medium">الدفع عند الاستلام</p>
                          <p class="text-xs text-slate-500">
                            متاح داخل صنعاء وبعض المناطق، وقد تُضاف رسوم خدمة
                            بسيطة.
                          </p>
                        </div>
                      </label>
                    </div>
                  </div>

                  <!-- Wallet details (dynamic) -->
                  <div
                    id="wallet-details-section"
                    class="grid grid-cols-1 sm:grid-cols-2 gap-4 border-t border-slate-100 pt-4"
                  >
                    <div class="sm:col-span-2">
                      <p
                        class="text-sm font-medium mb-1"
                        id="wallet-details-title"
                      >
                        تفاصيل الدفع عبر كريمي جوال
                      </p>
                      <p
                        class="text-xs text-slate-600"
                        id="wallet-details-description"
                      >
                        قم بتحويل إجمالي قيمة الطلب إلى محفظة كريمي جوال على
                        الرقم
                        <span class="font-semibold" id="wallet-wallet-number"
                          >777000000</span
                        >
                        ثم أدخل بيانات التحويل في الحقول أدناه.
                      </p>
                    </div>

                    <div>
                      <label
                        for="wallet-from-phone"
                        class="block text-sm font-medium mb-1.5"
                      >
                        رقم الجوال الذي تم التحويل منه
                      </label>
                      <input
                        type="tel"
                        id="wallet-from-phone"
                        name="walletFromPhone"
                        class="w-full rounded-2xl border border-slate-200 bg-slate-50 py-2.5 px-4 text-sm outline-none focus:bg-white focus:ring-2 focus:ring-brand-600/80 focus:border-brand-600/80 text-right placeholder:text-right"
                        placeholder="مثال: 0771234567"
                      />
                    </div>

                    <div>
                      <label
                        for="wallet-tx-id"
                        class="block text-sm font-medium mb-1.5"
                      >
                        رقم عملية التحويل (إن وجد)
                      </label>
                      <input
                        type="text"
                        id="wallet-tx-id"
                        name="walletTxId"
                        class="w-full rounded-2xl border border-slate-200 bg-slate-50 py-2.5 px-4 text-sm outline-none focus:bg-white focus:ring-2 focus:ring-brand-600/80 focus:border-brand-600/80"
                        placeholder="اكتب رقم العملية أو اتركه فارغاً"
                      />
                    </div>

                    <div class="sm:col-span-2">
                      <p class="text-[0.7rem] text-slate-400">
                        بعد إتمام الطلب سيقوم فريق خدمة العملاء بالتواصل معك
                        لتأكيد الدفع والتفاصيل النهائية.
                      </p>
                    </div>
                  </div>

                  <!-- Extra notes -->
                  <div class="border-t border-slate-100 pt-4">
                    <label
                      for="order-notes"
                      class="block text-sm font-medium mb-1.5"
                    >
                      ملاحظات إضافية (اختياري)
                    </label>
                    <textarea
                      id="order-notes"
                      name="orderNotes"
                      rows="3"
                      class="w-full rounded-2xl border border-slate-200 bg-slate-50 py-2.5 px-4 text-sm outline-none focus:bg-white focus:ring-2 focus:ring-brand-600/80 focus:border-brand-600/80"
                      placeholder="اكتب أي ملاحظات خاصة بالتوصيل (وقت مناسب، أقرب معلم، تفاصيل إضافية...)"
                    ></textarea>
                  </div>

                  <!-- Terms -->
                  <div class="border-t border-slate-100 pt-4">
                    <label
                      class="flex items-start gap-2 text-xs sm:text-sm text-slate-600"
                    >
                      <input
                        id="agree-terms"
                        type="checkbox"
                        name="agreeTerms"
                        required
                        class="mt-1 h-4 w-4 rounded border-slate-300 text-brand-600 focus:ring-brand-600"
                      />
                      <span>
                        أوافق على
                        <a
                          href="return-policy.html"
                          class="underline underline-offset-2 hover:text-brand-700"
                        >
                          سياسة الاستبدال والاسترجاع
                        </a>
                        و
                        <a
                          href="shipping-policy.html"
                          class="underline underline-offset-2 hover:text-brand-700"
                        >
                          سياسة الشحن
                        </a>
                        الخاصة بمتجر الأناقة.
                      </span>
                    </label>
                  </div>
                </div>

                <!-- Bottom actions (mobile) -->
                <div class="lg:hidden flex flex-col gap-3 pt-1">
                  <button
                    type="submit"
                    class="w-full inline-flex items-center justify-center rounded-2xl bg-gradient-to-l from-brand-700 to-brand-500 px-4 py-3 text-sm sm:text-base font-semibold text-white shadow-soft hover:opacity-90 active:scale-[0.98] transition"
                  >
                    تأكيد الطلب
                  </button>
                  <a
                    href="cart.html"
                    class="w-full inline-flex items-center justify-center rounded-2xl border border-slate-300 bg-white px-4 py-3 text-sm font-medium text-slate-700 hover:border-brand-600/60 hover:text-brand-700 transition"
                  >
                    العودة إلى السلة
                  </a>
                </div>
              </form>
            </section>

            <!-- Order summary (aside) -->
            <aside class="lg:col-span-1 space-y-4 lg:space-y-5">
              <div
                class="bg-white rounded-2xl shadow-soft p-5 sm:p-6 border border-brand-50/80 lg:sticky lg:top-28"
              >
                <div class="flex items-center justify-between mb-3">
                  <h2 class="text-lg font-semibold">ملخص الطلب</h2>
                  <!-- <span
                    class="text-[11px] px-2 py-1 rounded-full bg-brand-50 text-brand-700"
                    >الدفع بالريال اليمني</span
                  > -->
                </div>

                <!-- Products list (filled from cart.js) -->
                <div
                  id="order-summary-items"
                  class="space-y-3 mb-4 max-h-64 overflow-y-auto pr-1"
                >
                  <p class="text-xs text-slate-500">
                    يتم تحميل المنتجات من السلة...
                  </p>
                </div>

                <!-- Coupon -->
                <div
                  class="border border-dashed border-brand-200 rounded-2xl p-3.5 mb-4 bg-brand-50/40"
                >
                  <p class="text-xs text-slate-600 mb-2">
                    لديك كوبون خصم؟ (مثال تجريبي:
                    <span class="font-semibold">YEMEN10</span>)
                  </p>
                  <div class="flex gap-2">
                    <input
                      type="text"
                      id="checkout-coupon"
                      class="flex-1 rounded-2xl border border-slate-200 bg-white py-2 px-3 text-xs outline-none focus:bg-white focus:ring-2 focus:ring-brand-600/80 focus:border-brand-600/80"
                      placeholder="أدخل كوبون الخصم"
                    />
                    <button
                      type="button"
                      id="apply-coupon-button"
                      class="whitespace-nowrap rounded-2xl border border-brand-500/70 bg-white px-3 py-2 text-xs font-medium text-brand-700 hover:bg-brand-600 hover:text-white hover:border-brand-600 transition"
                    >
                      تطبيق
                    </button>
                  </div>
                  <p
                    id="checkout-coupon-message"
                    class="mt-1 text-[0.7rem] text-slate-500"
                  ></p>
                </div>

                <!-- Totals -->
                <dl class="space-y-2 text-sm mb-4">
                  <div class="flex items-center justify-between">
                    <dt class="text-slate-600">المجموع الفرعي</dt>
                    <dd id="order-summary-subtotal" class="font-medium">
                      0 ريال يمني
                    </dd>
                  </div>
                  <div class="flex items-center justify-between">
                    <dt class="text-slate-600">الشحن</dt>
                    <dd id="order-summary-shipping" class="font-medium">
                      0 ريال يمني
                    </dd>
                  </div>
                  <div class="flex items-center justify-between">
                    <dt class="text-slate-600">الخصم</dt>
                    <dd
                      id="order-summary-discount"
                      class="font-medium text-emerald-600"
                    >
                      0 ريال يمني
                    </dd>
                  </div>
                  <div
                    class="border-top border-slate-100 pt-2 mt-1 flex items-center justify-between"
                  >
                    <dt class="text-base font-semibold">الإجمالي</dt>
                    <dd
                      id="order-summary-total"
                      class="text-base font-semibold text-brand-800"
                    >
                      0 ريال يمني
                    </dd>
                  </div>
                </dl>

                <!-- Info line -->
                <p class="text-[0.7rem] text-slate-500 mb-4">
                  الأسعار بالريال اليمني. قد تختلف تكلفة الشحن قليلاً حسب شركة
                  التوصيل والمدينة.
                </p>

                <!-- Desktop actions -->
                <div class="hidden lg:flex flex-col gap-3">
                  <button
                    type="submit"
                    form="checkout-form"
                    class="w-full inline-flex items-center justify-center rounded-2xl bg-gradient-to-l from-brand-700 to-brand-500 px-4 py-3 text-sm sm:text-base font-semibold text-white shadow-soft hover:opacity-90 active:scale-[0.98] transition"
                  >
                    تأكيد الطلب
                  </button>
                  <a
                    href="cart.html"
                    class="w-full inline-flex items-center justify-center rounded-2xl border border-slate-300 bg-white px-4 py-3 text-sm font-medium text-slate-700 hover:border-brand-600/60 hover:text-brand-700 transition"
                  >
                    العودة إلى السلة
                  </a>
                </div>
              </div>

              <!-- Security badges -->
              <div
                class="bg-white rounded-2xl shadow-soft p-4 text-xs text-slate-600 space-y-3 border border-slate-100"
              >
                <div class="flex items-center gap-2">
                  <div
                    class="w-8 h-8 rounded-full bg-brand-50 flex items-center justify-center"
                  >
                    <svg
                      class="w-4 h-4 text-brand-700"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="1.7"
                        d="M16 11V7a4 4 0 1 0-8 0v4m-1 0h10a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2Z"
                      />
                    </svg>
                  </div>
                  <div>
                    <p class="font-medium text-[0.75rem]">
                      دفع آمن عبر المحافظ الإلكترونية
                    </p>
                    <p class="text-[0.7rem] text-slate-500">
                      لن نطلب منك كلمة السر أو كود الـ OTP، فقط بيانات التحويل.
                    </p>
                  </div>
                </div>

                <div class="flex items-center gap-2">
                  <div
                    class="w-8 h-8 rounded-full bg-brand-50 flex items-center justify-center"
                  >
                    <svg
                      class="w-4 h-4 text-brand-700"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="1.7"
                        d="M4 4v5h.582M20 20v-5h-.581M5.582 9A7.5 7.5 0 0 1 18.5 6.75L20 9M18.418 15A7.5 7.5 0 0 1 5.5 17.25L4 15"
                      />
                    </svg>
                  </div>
                  <div>
                    <p class="font-medium text-[0.75rem]">
                      استبدال واسترجاع سهل
                    </p>
                    <p class="text-[0.7rem] text-slate-500">
                      يمكنك طلب الاستبدال أو الاسترجاع وفق سياسة المتجر المحلية.
                    </p>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        </div>
      </main>

      <!-- FOOTER -->
      <footer class="border-t border-slate-200 bg-white mt-10">
        <div class="container mx-auto px-4 py-10">
          <div class="grid md:grid-cols-4 gap-8 text-sm">
            <div>
              <h4 class="font-semibold mb-3">متجر التقنية</h4>
              <p class="text-xs text-slate-600 mb-3">
                متجر إلكتروني متخصص في بيع الأجهزة الإلكترونية، الجوالات،
                اللابتوبات، الشاشات، وأجهزة الألعاب مع ضمان معتمد وخدمة ما بعد
                البيع في العالم العربي.
              </p>
              <p class="text-xs text-slate-500">
                ساعات العمل: من الأحد إلى الخميس، 9 صباحاً - 6 مساءً.
              </p>
            </div>
            <div>
              <h4 class="font-semibold mb-3">روابط مهمة</h4>
              <ul class="space-y-2 text-xs text-slate-600">
                <li>
                  <a href="/src/pages/about.html" class="hover:text-brand-600"
                    >من نحن</a
                  >
                </li>
                <li>
                  <a
                    href="/src/pages/shipping-policy.html"
                    class="hover:text-brand-600"
                    >سياسة الشحن</a
                  >
                </li>
                <li>
                  <a
                    href="/src/pages/return-policy.html"
                    class="hover:text-brand-600"
                    >سياسة الاستبدال والاسترجاع</a
                  >
                </li>
                <li>
                  <a href="/src/pages/faq.html" class="hover:text-brand-600"
                    >الأسئلة الشائعة</a
                  >
                </li>
                <li>
                  <a href="/src/pages/contact.html" class="hover:text-brand-600"
                    >تواصل معنا</a
                  >
                </li>
              </ul>
            </div>
            <div>
              <h4 class="font-semibold mb-3">حسابي</h4>
              <ul class="space-y-2 text-xs text-slate-600">
                <li>
                  <a href="/src/pages/account.html" class="hover:text-brand-600"
                    >لوحة التحكم</a
                  >
                </li>
                <li>
                  <a href="/src/pages/cart.html" class="hover:text-brand-600"
                    >سلة التسوق</a
                  >
                </li>
                <li>
                  <a
                    href="/src/pages/checkout.html"
                    class="hover:text-brand-600"
                    >إتمام الشراء</a
                  >
                </li>
              </ul>
            </div>
            <div>
              <h4 class="font-semibold mb-3">تابعنا وطرق الدفع</h4>
              <div class="flex gap-4 text-lg mb-3">
                <!-- Instagram -->
                <a href="#" class="hover:text-brand-600" aria-label="Instagram">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-6 h-6"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5A4.25 4.25 0 0 0 20.5 16.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5zM12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 1.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7zm5-1.75a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5z"
                    />
                  </svg>
                </a>

                <!-- Twitter (X) -->
                <a
                  href="#"
                  class="hover:text-brand-600"
                  aria-label="Twitter / X"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-6 h-6"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M18.146 2h3.123l-6.817 7.79L22 22h-6.343l-4.96-6.507L4.8 22H1.674l7.31-8.35L2 2h6.47l4.474 5.932L18.146 2zm-2.217 17.597h1.727L8.173 4.295H6.314l9.615 15.302z"
                    />
                  </svg>
                </a>

                <!-- TikTok -->
                <a href="#" class="hover:text-brand-600" aria-label="TikTok">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-6 h-6"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M12.95 2h3.03c.15 1.33.76 2.54 1.72 3.44A6.3 6.3 0 0 0 19.7 7v3.03a9.3 9.3 0 0 1-3.47-.7 9.55 9.55 0 0 1-1.32-.67v6.55a6.82 6.82 0 0 1-1.25 3.97A6.36 6.36 0 0 1 9.4 22a6.4 6.4 0 0 1-1.9-.29 6.45 6.45 0 0 1-1.62-.83 6.37 6.37 0 0 1-2.31-3.05A6.5 6.5 0 0 1 3.4 15c0-1.3.37-2.56 1.06-3.64A6.37 6.37 0 0 1 7.74 8.4a6.28 6.28 0 0 1 3.48.07v3.29a3.1 3.1 0 0 0-1.47-.38 3.16 3.16 0 0 0-2.19.9A3.3 3.3 0 0 0 6.7 15c0 .86.33 1.66.93 2.26.6.6 1.4.94 2.24.94a3.16 3.16 0 0 0 2.23-.92 3.1 3.1 0 0 0 .93-2.25V2z"
                    />
                  </svg>
                </a>
              </div>

              <p class="text-xs text-slate-600 mb-2">
                اشترك في النشرة البريدية للحصول على أحدث العروض والتخفيضات على
                الإلكترونيات.
              </p>
              <form class="flex gap-2">
                <input
                  type="email"
                  class="flex-1 rounded-full border border-slate-200 px-3 py-1.5 text-xs focus:outline-none focus:border-brand-500"
                  placeholder="أدخل بريدك الإلكتروني"
                />
                <button
                  type="submit"
                  class="rounded-full bg-slate-900 text-white text-xs px-4 py-1.5 hover:bg-slate-800"
                >
                  اشتراك
                </button>
              </form>

              <div class="mt-4">
                <p class="text-xs mb-2 text-slate-600">طرق الدفع المتاحة:</p>
                <div class="flex flex-wrap gap-2 text-[11px] text-slate-800">
                  <span
                    class="px-3 py-1 rounded-full bg-slate-100 border border-slate-200"
                    >مدى</span
                  >
                  <span
                    class="px-3 py-1 rounded-full bg-slate-100 border border-slate-200"
                    >VISA</span
                  >
                  <span
                    class="px-3 py-1 rounded-full bg-slate-100 border border-slate-200"
                    >Mastercard</span
                  >
                  <span
                    class="px-3 py-1 rounded-full bg-slate-100 border border-slate-200"
                    >Apple Pay</span
                  >
                  <span
                    class="px-3 py-1 rounded-full bg-slate-100 border border-slate-200"
                    >الدفع عند الاستلام</span
                  >
                </div>
              </div>
            </div>
          </div>
          <div
            class="mt-8 border-t border-slate-100 pt-4 flex flex-col md:flex-row items-center justify-between text-[11px] text-slate-500 gap-2 px-4"
          >
            <p>© <span id="year"></span> متجر التقنية. جميع الحقوق محفوظة.</p>
            <p>تم تطوير الموقع من قبل م/ايمن عجلان.</p>
          </div>
        </div>
      </footer>
    </div>

    <!-- JS files -->
    <script src="/src/assets/js/main.js"></script>
    <script src="/src/assets/js/cart.js"></script>
    <script src="/src/assets/js/checkout.js"></script>
  </body>
</html>
